{"nodes":[{"name":1,"label":{"type":"plain","value":"tutorial start"},"position":[246,30],"stencil":"hexagon","userData":{"data":"{\n    \"action\": function(game) {\n        ajuc.tiledArcade.messages(\"<p>Welcome to the tutorial, dear </p><p>Player</p>.\");\n    }\n}"}},{"name":2,"label":{"type":"plain","value":"start"},"position":[26,27],"stencil":"circle","userData":{"data":"{ \"start\": true,\n  \"action\": function(game) {\n  }\n}"}},{"name":3,"label":{"type":"plain","value":"corner"},"position":[10000,10000],"stencil":"circle","userData":{}},{"name":4,"label":{"type":"plain","value":"turn up"},"position":[356,29.5],"stencil":"box","userData":{"data":"{\n    \"action\": function(game) {\n       ajuc.tiledArcade.messages(\"<p>Now try to turn the rocket nose straight up.</p>\");\n    }\n}"}},{"name":5,"label":{"type":"plain","value":"turn left or right"},"position":[278,84.5],"stencil":"box","userData":{"data":"{\n\n    \"action\": function(game) {\n        ajuc.tiledArcade.messages(\"<p>First, try to turn left and right. Press <b>left arrow</b> to turn left, <b>righ arrow</b> to turn right. Notice, that when you turn your ship, your rotation engine is enabled, and it uses up fuel or energy (depending on kind of the engine).</p>\");\n    }\n}"}},{"name":6,"label":{"type":"plain","value":"shoot"},"position":[486,84.5],"stencil":"box","userData":{"data":"{\n    \"action\": function(game) {\n       ajuc.tiledArcade.messages(\"Besides engines, your ship also has tools. There are many kinds of tools, the most used are probably weapons. To use current tool press <b>ctrl</b> key. The tool will be used. Your current tool is probably gun, so using it will shoot a bullet. Shooting gun uses up ammunition, which you can see on the <b>top right corner</b> of the screen, on the black bar titled <b>ammo</b>. Now press <b>ctrl</b> key.\");\n    }\n}"}},{"name":7,"label":{"type":"plain","value":"alternate actions"},"position":[683,26],"stencil":"box","userData":{"data":"{\n    \"action\": function(game) {\n       ajuc.tiledArcade.messages(\"Some tools have alternative uses. For example for harpoon you sometimes want to cut the rope that binds you. To perform the alternative action press <b>alt</b> key. Now try to do that.\");\n    }\n}"}},{"name":8,"label":{"type":"plain","value":"security alert"},"position":[78,246],"stencil":"box","userData":{"data":"{\n   \"action\": function(game) {\n        ajuc.tiledArcade.messagesToSelf(\n           \"Sirens started to beep! Security alert! \"+\n           \"Someone is attacking the village?\", true\n        );\n        ajuc.tiledArcade.updateObjectsWhere(game,\n            function(o) {\n                return (o.group === \"bad_security_towers\");\n            },\n            function(o) {\n                o.enabled = true;\n            }\n        );\n        ajuc.tiledArcade.removeQuestGoal(\n            \"farm\", \"fly to farm\"\n        );\n    }\n}"}},{"name":9,"label":{"type":"plain","value":"thrust"},"position":[396,84.5],"stencil":"box","userData":{"data":"{\n    \"action\": function(game) {\n       ajuc.tiledArcade.messages(\"<p>Great. Press <b>up arrow</b>. Main engine of your ship will engage, and rocket will go forward. Main engine uses fuel or energy, just like rotation engine. You can see how much fuel and energy you have on <b>top right corner</b> of the screen on the green (fuel), and blue (energy) bars.</p>\");\n    }\n}"}},{"name":10,"label":{"type":"plain","value":"fall back"},"position":[453,29.5],"stencil":"box","userData":{"data":"{\n    \"action\": function(game) {\n        ajuc.tiledArcade.messages(\"OK, you're flying. Be careful, don't press the <b>up arrow</b> for too long, because rockets don't have brakes, and it's easy to collide with some wall. The best way to fly is to always keep the nose of your rocket more or less straight up, and only turn slightly left or right, when you need to go sideways. That way, you can always correct for gravitation. Now fall back to earth (stop pressing <b>up arrow</b> and engine will disable).\");\n    }\n}"}},{"name":11,"label":{"type":"plain","value":"regular game"},"position":[139,128],"stencil":"box","userData":{"data":"{\n   \"action\": function(game) {\n    }\n}"}},{"name":12,"label":{"type":"plain","value":"nothing yet"},"position":[780,89],"stencil":"box","userData":{"data":"{\n   \"action\": function(game) {\n    }\n}"}},{"name":13,"label":{"type":"plain","value":"farm start"},"position":[142,204],"stencil":"hexagon","userData":{"data":"{\n    \"action\": function(game) {\n        ajuc.tiledArcade.messagesToSelf(\"So I should fly to farm. It's under the village.\");\n        ajuc.tiledArcade.removeQuestGoal(\n            \"farm\", \"speak with sister\"\n        );\n        ajuc.tiledArcade.setQuestGoal(\n            \"farm\", \"fly to farm\", [3781, 177]\n        );\n    }\n}"}},{"name":14,"label":{"type":"plain","value":"fly to farm"},"position":[235,248],"stencil":"box","userData":{"data":"{\n   \"action\": function(game) {\n        ajuc.tiledArcade.messagesToSelf(\"I'd better hurry up. I'm already hungry.\");\n}\n}"}},{"name":15,"label":{"type":"plain","value":"destroy towers"},"position":[216,397],"stencil":"box","userData":{"data":"{\n   \"action\": function(game) {\n        ajuc.tiledArcade.messagesToSelf(\n           \"I need to destroy the autocannos here, and near the main gate, before get hurt.\"\n        );\n        ajuc.tiledArcade.setQuestGoal(\n            \"farm\", \"destroy bad security tower 1\", [3789, 182]\n        );\n        ajuc.tiledArcade.setQuestGoal(\n            \"farm\", \"destroy bad security tower 2\", [3802, 183]\n        );\n        ajuc.tiledArcade.setQuestGoal(\n            \"farm\", \"destroy bad security tower 3\", [3764, 180]\n        );\n        ajuc.tiledArcade.setQuestGoal(\n            \"farm\", \"destroy bad security tower 4\", [3754, 157]\n        );\n        ajuc.tiledArcade.setQuestGoal(\n            \"farm\", \"destroy bad security tower 5\", [3750, 148]\n        );\n        ajuc.tiledArcade.setQuestGoal(\n            \"farm\", \"destroy bad security tower 6\", [3754, 147]\n        );\n    }\n}"}},{"name":16,"label":{"type":"plain","value":"return to village"},"position":[326,347],"stencil":"box","userData":{"data":"{\n   \"action\": function(game) {\n        ajuc.tiledArcade.messagesToSelf(\n           \"I should return to village, maybe someone knows what really happened.\"\n        );\n        ajuc.tiledArcade.removeQuestGoal(\n            \"farm\", \"destroy bad security tower 1\"\n        );\n        ajuc.tiledArcade.removeQuestGoal(\n            \"farm\", \"destroy bad security tower 2\"\n        );\n        ajuc.tiledArcade.removeQuestGoal(\n            \"farm\",  \"destroy bad security tower 3\"\n        );\n        ajuc.tiledArcade.removeQuestGoal(\n            \"farm\",  \"destroy bad security tower 4\"\n        );\n        ajuc.tiledArcade.removeQuestGoal(\n            \"farm\",  \"destroy bad security tower 5\"\n        );\n        ajuc.tiledArcade.removeQuestGoal(\n            \"farm\",  \"destroy bad security tower 6\"\n        );\n        ajuc.tiledArcade.setQuestGoal(\n            \"farm\", \"return to village\", [3759, 155]\n        );\n    }\n}"}},{"name":17,"label":{"type":"plain","value":"defend wind turbines"},"position":[401,399],"stencil":"box","userData":{}},{"name":18,"label":{"type":"plain","value":"something"},"position":[78,312],"stencil":"hexagon","userData":{"data":"{\n   \"action\": function(game) {\n        ajuc.tiledArcade.messagesToSelf(\n           \"Autocannons are attacking me? Something's wrong!\", true\n        );\n    }\n}"}},{"name":19,"label":{"type":"plain","value":19},"position":[578,613],"stencil":"hexagon","userData":{}},{"name":20,"label":{"type":"plain","value":20},"position":[645,556],"stencil":"hexagon","userData":{}},{"name":21,"label":{"type":"plain","value":"shoot harpoon"},"position":[594,84],"stencil":"box","userData":{"data":"{\n    \"action\": function(game) {\n       ajuc.tiledArcade.messages(\"This tool shoots a harpoon arrow. It's sometimes useful when hunting for wild birds, or when you want to stop quickly. Now shoot the harpoon in such a way, that you'll hang on the rope.\");\n    }\n}"}},{"name":22,"label":{"type":"plain","value":"next tool"},"position":[544,27],"stencil":"box","userData":{"data":"{\n    \"action\": function(game) {\n       ajuc.tiledArcade.messages(\"Your ship has currently 2 tools installed. You can see them in the middle of the sidepanel. Current used tool is indicated by red border. You can change your currently used tool at any time by pressing <b>down arrow</b>. Now do that.\");\n    }\n}"}},{"name":23,"label":{"type":"plain","value":"speak with your sister"},"position":[141,167],"stencil":"box","userData":{"data":"{\n   \"action\": function(game) {\n        ajuc.tiledArcade.messagesToSelf(\"I wonder, if today is my turn to work on farm. I'd better ask Viola. She should be in home.\");\n        ajuc.tiledArcade.setQuestGoal(\n            \"farm\", \"speak with sister\", [3785, 149]\n        );\n    }\n}"}},{"name":24,"label":{"type":"plain","value":"go to meeting"},"position":[485,347],"stencil":"box","userData":{}},{"name":25,"label":{"type":"plain","value":"tutorial end"},"position":[486,126],"stencil":"box","userData":{"data":"{\n   \"action\": function(game) {\n        ajuc.tiledArcade.messages(\"<h1>Congratulations</h1>.<p></p><p>You've finished tutorial.</p>Good luck with your adventures.\");\n    }\n}"}},{"name":26,"label":{"type":"plain","value":26},"position":[778,461],"stencil":"circle","userData":{}},{"name":27,"label":{"type":"plain","value":27},"position":[785,497],"stencil":"circle","userData":{}}],"edges":[{"src":2,"dst":1,"label":{"type":"plain","value":"tutorial"},"stencil":"directed line","userData":{"data":"{\n    \"condition\":function(game) {\n        return game.mode===\"tutorial\";\n    },\n    \"action\":function(game) {\n    }\n}"}},{"src":1,"dst":5,"label":null,"stencil":"line","userData":{"data":"{\n    \"condition\": ajuc.utils.trueAfter(2),\n    \"action\":function(game) {\n    }\n}"}},{"src":5,"dst":4,"label":null,"stencil":"line","userData":{"data":"{\n    \"condition\":function(game) {\n      return game.players[game.currentPlayer].actionsPerformed[\"TurnLeft\"] ||\n        game.players[game.currentPlayer].actionsPerformed[\"TurnRight\"];\n    },\n    \"action\":function(game) {\n    }\n}"}},{"src":4,"dst":9,"label":null,"stencil":"line","userData":{"data":"{\n\"condition\": function(game) {\n  return Math.abs(Math.sin(game.players[game.currentPlayer].rotation)+1) < 0.03;\n},\n\"action\": function(game) {\n}\n}"}},{"src":9,"dst":10,"label":null,"stencil":"line","userData":{"data":"{\n    \"condition\":function(game) {\n      return game.players[game.currentPlayer].velocity.y < -0.1;\n    },\n    \"action\":function(game) {\n    }\n}"}},{"src":10,"dst":6,"label":null,"stencil":"line","userData":{"data":"{\n    \"condition\":function(game) {\n      return (Math.abs(game.players[game.currentPlayer].velocity.y) < 0.05) && (!game.players[game.currentPlayer].actionsPerformed[\"Thrust\"]);\n    },\n    \"action\":function(game) {\n    }\n}"}},{"src":14,"dst":8,"label":null,"stencil":"line","userData":{"data":"{\n    \"condition\": function(game) {\n        return ajuc.tiledArcade.playerInPlace(game, \"Keepingale Farm\");\n    },\n    \"action\": function(game) {\n    }\n}"}},{"src":15,"dst":16,"label":null,"stencil":"line","userData":{"data":"{\n    \"condition\": function(game) {\n        return (ajuc.tiledArcade.countObjectsWhere(game,\n            function(o) {\n                return (o.group === \"bad_security_towers\");\n            }\n        ) === 0);\n    },\n    \"action\":function(game) {\n    }\n}"}},{"src":18,"dst":15,"label":null,"stencil":"line","userData":{"data":"{\n    \"condition\": ajuc.utils.trueAfter(7),\n    \"action\":function(game) {\n    }\n}"}},{"src":16,"dst":17,"label":null,"stencil":"line","userData":{"data":"{\n    \"condition\": function(game) {\n        return ajuc.tiledArcade.playerInPlace(game, \"Keepingale\");\n    },\n    \"action\": function(game) {\n    }\n}"}},{"src":17,"dst":24,"label":null,"stencil":"line","userData":{}},{"src":13,"dst":14,"label":null,"stencil":"line","userData":{"data":"{\n    \"condition\": ajuc.utils.trueAfter(30),\n    \"action\":function(game) {\n    }\n}"}},{"src":8,"dst":18,"label":null,"stencil":"line","userData":{"data":"{\n    \"condition\": ajuc.utils.trueAfter(10),\n    \"action\":function(game) {\n    }\n}"}},{"src":25,"dst":11,"label":null,"stencil":"line","userData":{"data":"{\n    \"condition\": ajuc.utils.trueAfter(5),\n    \"action\":function(game) {\n    }\n}"}},{"src":2,"dst":11,"label":{"type":"plain","value":"game"},"stencil":"line","userData":{"data":"{\n    \"condition\":function(game) {\n        return game.mode===\"campaign\";\n    },\n    \"action\":function(game) {\n    }\n}"}},{"src":13,"dst":8,"label":null,"stencil":"line","userData":{"data":"{\n    \"condition\": function(game) {\n        return ajuc.tiledArcade.playerInPlace(game, \"Keepingale Farm\");\n    },\n    \"action\": function(game) {\n    }\n}"}},{"src":23,"dst":13,"label":null,"stencil":"line","userData":{"data":"{\n    \"condition\":function(game) {\n      return ajuc.facts.alreadySpokeAbout(\n          \"player\", 2, \"working on the farm\"\n      );\n    },\n    \"action\":function(game) {\n    }\n}"}},{"src":11,"dst":23,"label":null,"stencil":"line","userData":{"data":"{\n    \"condition\": ajuc.utils.trueAfter(3),\n    \"action\":function(game) {\n    }\n}"}},{"src":6,"dst":22,"label":null,"stencil":"line","userData":{"data":"{\n    \"condition\":function(game) {\n      return game.players[game.currentPlayer].actionsPerformed[\"Use\"];\n    },\n    \"action\":function(game) {\n    }\n}"}},{"src":22,"dst":21,"label":null,"stencil":"line","userData":{"data":"{\n    \"condition\":function(game) {\n      return game.players[game.currentPlayer].tools[game.players[game.currentPlayer].currentTool] === 5;\n    },\n    \"action\":function(game) {\n    }\n}"}},{"src":21,"dst":7,"label":null,"stencil":"line","userData":{"data":"{\n    \"condition\":function(game) {\n      return (ajuc.tiledArcade.countRelationsWhere(\nfunction(relation) {\n          return (relation !== undefined) &&\n                    ((relation.objects[0] === game.players[game.currentPlayer]) ||\n                     (relation.objects[1] === game.players[game.currentPlayer])) &&\n                    (relation.mode === \"max-distance-elastic\");\n        }\n      ) > 0);\n    },\n    \"action\":function(game) {\n    }\n}"}},{"src":7,"dst":12,"label":null,"stencil":"line","userData":{"data":"{\n    \"condition\":function(game) {\n      return (ajuc.tiledArcade.countRelationsWhere(\n        function(relation) {\n          return (relation !== undefined) &&\n                    ((relation.objects[0] === game.players[game.currentPlayer]) ||\n                     (relation.objects[1] === game.players[game.currentPlayer])) &&\n                    (relation.mode === \"max-distance-elastic\");\n        }\n      ) === 0);\n    },\n    \"action\":function(game) {\n    }\n}"}},{"src":12,"dst":25,"label":null,"stencil":"line","userData":{"data":"{\n    \"condition\": ajuc.utils.trueAfter(5),\n    \"action\":function(game) {\n    }\n}"}}],"defaultNodeStencil":"circle","defaultEdgeStencil":"line"}